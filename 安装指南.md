# VS Code 插件打包和安装指南

## 方法一：使用 vsce 打包（推荐）

### 步骤 1：安装 vsce 打包工具

在终端中运行：

```powershell
npm install -g @vscode/vsce
```

> 💡 如果安装很慢，可以使用国内镜像：
> ```powershell
> npm install -g @vscode/vsce --registry=https://registry.npmmirror.com
> ```

### 步骤 2：打包插件

在插件目录中运行：

```powershell
cd d:\file\AI\vscode_chajian
vsce package
```

成功后会生成 `novel-reader-statusbar-1.0.0.vsix` 文件。

### 步骤 3：安装插件

**方法 A：使用命令行安装**
```powershell
code --install-extension novel-reader-statusbar-1.0.0.vsix
```

**方法 B：使用 VS Code 界面安装**
1. 打开 VS Code
2. 按 `Ctrl+Shift+X` 打开扩展视图
3. 点击右上角的 `...`（更多操作）
4. 选择 `从 VSIX 安装...`
5. 选择 `novel-reader-statusbar-1.0.0.vsix` 文件
6. 安装完成后重新加载窗口

---

## 方法二：直接复制到扩展目录（快速方法）

如果 vsce 安装失败，可以直接复制文件到 VS Code 扩展目录：

### 步骤 1：找到 VS Code 扩展目录

Windows 扩展目录位置：
```
C:\Users\你的用户名\.vscode\extensions\
```

### 步骤 2：创建插件文件夹

在扩展目录中创建文件夹：
```
C:\Users\你的用户名\.vscode\extensions\local.novel-reader-statusbar-1.0.0\
```

### 步骤 3：复制文件

将以下文件复制到新建的文件夹中：
- `extension.js`
- `package.json`
- `README.md`

> ⚠️ **不要复制以下文件/文件夹**：
> - `.vscode/`
> - `test_novel.txt`
> - `node_modules/`（如果有）

### 步骤 4：重启 VS Code

关闭所有 VS Code 窗口，重新打开即可。

---

## 验证安装

安装成功后：

1. 按 `Ctrl+Shift+P` 打开命令面板
2. 输入 `Novel Reader`
3. 应该能看到以下命令：
   - Novel Reader: 选择小说文件
   - Novel Reader: 下一页
   - Novel Reader: 上一页
   - Novel Reader: 显示文本
   - Novel Reader: 隐藏文本
   - Novel Reader: 选择章节

4. 按 `Ctrl+,` 打开设置，搜索 `Novel Reader`，应该能看到配置项

---

## 使用插件

### 快速开始

1. 按 `Ctrl+Shift+P`
2. 选择 `Novel Reader: 选择小说文件`
3. 选择一个 `.txt` 小说文件（UTF-8 编码）
4. 状态栏左侧会显示小说内容

### 快捷键

- `Ctrl+Alt+→` - 下一页
- `Ctrl+Alt+←` - 上一页
- `Ctrl+Alt+S` - 显示文本
- `Ctrl+Alt+H` - 隐藏文本（老板模式）
- `Ctrl+Alt+C` - 选择章节

---

## 卸载插件

**如果使用 VSIX 安装**：
1. 打开扩展视图 (`Ctrl+Shift+X`)
2. 找到 `Novel Reader - StatusBar`
3. 点击卸载

**如果手动复制安装**：
1. 直接删除扩展目录中的插件文件夹
2. 重启 VS Code

---

## 故障排除

### 问题：vsce 安装失败

**解决方案**：使用方法二（直接复制文件）

### 问题：插件安装后不显示

**解决方案**：
1. 检查扩展是否启用（扩展视图中查看）
2. 重新加载窗口 (`Ctrl+R`)
3. 完全重启 VS Code

### 问题：快捷键不生效

**解决方案**：
1. 按 `Ctrl+K Ctrl+S` 打开键盘快捷方式
2. 搜索 `Novel Reader`
3. 检查是否有冲突，可以重新绑定

### 问题：读取小说文件失败

**解决方案**：
1. 确保文件是 UTF-8 编码
2. 尝试用记事本打开，另存为 UTF-8 编码
3. 检查文件路径是否正确

---

## 配置示例

在 VS Code 设置 (settings.json) 中：

```json
{
  "novelReader.filePath": "D:\\novels\\三国演义.txt",
  "novelReader.charsPerPage": 60,
  "novelReader.chapterRegex": "^第[0-9一二三四五六七八九十百千]+回.*$"
}
```

---

**祝你阅读愉快！** 📖
